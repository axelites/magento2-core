<?php
/** @var \Sequra\Core\Block\WidgetInitializer $block */
?>
<script>
    if('undefined' === typeof window.SequraWidgetFacade){
        window.SequraWidgetFacade = {};
    }
    window.SequraWidgetFacade = {
        ...window.SequraWidgetFacade,
        scriptUri: "<?php echo $block->getScriptUri(); ?>",
        thousandSeparator: "<?php echo $block->getThousandsSeparator(); ?>",
        decimalSeparator: "<?php echo $block->getDecimalSeparator(); ?>",
        locale: "<?php echo $block->getLocale(); ?>",
        merchant: "<?php echo $block->getMerchantRef(); ?>",
        assetKey: "<?php echo $block->getAssetsKey(); ?>",
        products: <?php echo json_encode($block->getProducts()); ?>
    };
    (function (i, s, o, g, r, a, m) { i['SequraConfiguration'] = g; i['SequraOnLoad'] = []; i[r] = {}; i[r][a] = function (callback) { i['SequraOnLoad'].push(callback); }; (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]); a.async = 1; a.src = g.scriptUri; m.parentNode.insertBefore(a, m); })(window, document, 'script', window.SequraWidgetFacade, 'Sequra', 'onLoad');
</script>
<script type="text/x-magento-init">
    {
        "*": {
            "Sequra_Core/js/widget-initializer": {}
        }
    }
</script>
